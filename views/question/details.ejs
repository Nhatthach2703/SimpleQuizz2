<% layout = '../layouts/main'; %>

<div class="container mt-4">
    <h2>Question Detail</h2>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Question:</h5>
            <p class="card-text"><%= question.text %></p>

            <h5 class="card-title">Options:</h5>
            <ul class="list-group">
                <% question.options.forEach((option, index) => { %>
                    <li class="list-group-item 
                        <% if (question.correctAnswerIndex.includes(index)) { %> 
                            list-group-item-success font-weight-bold 
                        <% } %>">
                        <strong>Option <%= index + 1 %>:</strong> <%= option %>
                    </li>
                <% }); %>
            </ul>

            <h5 class="card-title mt-3">Correct Answers:</h5>
            <p class="card-text">
                <% question.correctAnswerIndex.forEach((index) => { %>
                    <span class="badge bg-success">Option <%= index + 1 %></span>
                <% }); %>
            </p>

            <% if (question.keywords.length > 0) { %>
                <h5 class="card-title mt-3">Keywords:</h5>
                <p class="card-text">
                    <% question.keywords.forEach((keyword) => { %>
                        <span class="badge bg-primary"><%= keyword %></span>
                    <% }); %>
                </p>
            <% } %>
        </div>
    </div>

    <a href="/questions" class="btn btn-secondary mt-3">Back</a>
    <a href="/questions/<%= question._id %>/edit" class="btn btn-warning mt-3">Edit</a>
    <form action="/questions/<%= question._id %>?_method=DELETE" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-danger mt-3" onclick="return confirm('Are you sure?')">Delete</button>
    </form>
</div>
